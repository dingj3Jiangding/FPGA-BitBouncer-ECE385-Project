#include "plants.h"

uint8_t plants_img[1][1950] =
		{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
		0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
		0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x90,0x99,
		0x09,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
		0x00,0x00,0x00,0x00,0x00,0x99,0x99,0x99,0x99,
		0x99,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
		0x90,0x99,0x22,0x99,0x00,0x00,0x00,0x00,0x00,
		0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x99,0x99,
		0x29,0x22,0x22,0x92,0x99,0x09,0x00,0x00,0x00,
		0x00,0x00,0x00,0x99,0x22,0x22,0x22,0x09,0x00,
		0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
		0x99,0x22,0x22,0x22,0x22,0x22,0x22,0x22,0x99,
		0x09,0x00,0x00,0x00,0x00,0x90,0x29,0x22,0x22,
		0x22,0x99,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
		0x00,0x00,0x99,0x29,0x22,0x22,0x22,0x22,0x22,
		0x22,0x22,0x22,0x99,0x09,0x00,0x00,0x00,0x99,
		0x22,0x22,0x92,0x29,0x92,0x00,0x00,0x00,0x00,
		0x00,0x00,0x00,0x00,0x90,0x29,0x22,0x22,0x22,
		0x22,0x22,0x22,0x22,0x22,0x22,0x22,0x99,0x00,
		0x00,0x99,0x99,0x22,0x22,0x99,0x99,0x22,0x09,
		0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x99,0x22,
		0x22,0x22,0x22,0x22,0x22,0x22,0x22,0x22,0x22,
		0x22,0x22,0x99,0x99,0x99,0x92,0x22,0x22,0x99,
		0x99,0x22,0x09,0x00,0x00,0x00,0x00,0x00,0x00,
		0x99,0x29,0x22,0x22,0x22,0x22,0x22,0x22,0x22,
		0x22,0x22,0x22,0x92,0x99,0x22,0x22,0x22,0x92,
		0x22,0x92,0x99,0x99,0x22,0x09,0x00,0x00,0x00,
		0x00,0x00,0x00,0x99,0x22,0x22,0x22,0x22,0x22,
		0x22,0x22,0x22,0x22,0x22,0x22,0x19,0x91,0x29,
		0x22,0x22,0x99,0x22,0x92,0x99,0x99,0x29,0x99,
		0x00,0x00,0x00,0x00,0x00,0x90,0x22,0x22,0x22,
		0x22,0x22,0x22,0x22,0x22,0x22,0x92,0x99,0x22,
		0x19,0x91,0x29,0x22,0x22,0x29,0x22,0x92,0x99,
		0x99,0x29,0x92,0x00,0x00,0x00,0x00,0x00,0x99,
		0x22,0x22,0x22,0x22,0x22,0x22,0x22,0x22,0x22,
		0x99,0x99,0x29,0x92,0x99,0x29,0x22,0x22,0x29,
		0x22,0x92,0x99,0x99,0x29,0x92,0x00,0x99,0x99,
		0x99,0x09,0x29,0x22,0x22,0x22,0x22,0x22,0x22,
		0x22,0x22,0x92,0x11,0x99,0x99,0x92,0x99,0x22,
		0x22,0x22,0x29,0x22,0x92,0x99,0x99,0x29,0x92,
		0x90,0x39,0x33,0x33,0x99,0x29,0x22,0x22,0x22,
		0x22,0x22,0x22,0x22,0x22,0x92,0x11,0x99,0x99,
		0x22,0x22,0x22,0x22,0x22,0x29,0x22,0x92,0x99,
		0x99,0x29,0x92,0x90,0x33,0x33,0x33,0x93,0x29,
		0x22,0x22,0x22,0x22,0x22,0x22,0x22,0x22,0x22,
		0x99,0x99,0x99,0x22,0x22,0x22,0x22,0x22,0x29,
		0x22,0x92,0x99,0x99,0x29,0x92,0x39,0x33,0x33,
		0x93,0x99,0x22,0x22,0x22,0x22,0x22,0x22,0x22,
		0x22,0x22,0x22,0x99,0x99,0x99,0x22,0x22,0x22,
		0x22,0x22,0x29,0x22,0x92,0x99,0x99,0x29,0x92,
		0x39,0x33,0x99,0x99,0x99,0x22,0x22,0x22,0x22,
		0x22,0x22,0x22,0x22,0x22,0x22,0x92,0x99,0x29,
		0x22,0x22,0x22,0x22,0x22,0x29,0x22,0x92,0x99,
		0x99,0x29,0x92,0x39,0x93,0x09,0x00,0x90,0x22,
		0x22,0x22,0x22,0x22,0x22,0x22,0x22,0x22,0x22,
		0x22,0x99,0x22,0x22,0x22,0x22,0x22,0x22,0x99,
		0x22,0x92,0x99,0x99,0x29,0x92,0x39,0x93,0x00,
		0x00,0x90,0x22,0x22,0x22,0x22,0x22,0x22,0x22,
		0x22,0x22,0x22,0x22,0x22,0x22,0x22,0x22,0x22,
		0x22,0x22,0x92,0x22,0x92,0x99,0x99,0x29,0x92,
		0x39,0x99,0x00,0x00,0x90,0x22,0x22,0x22,0x22,
		0x22,0x22,0x22,0x22,0x22,0x22,0x22,0x22,0x22,
		0x22,0x22,0x22,0x22,0x22,0x92,0x22,0x92,0x99,
		0x99,0x29,0x92,0x39,0x09,0x00,0x00,0x90,0x22,
		0x22,0x22,0x22,0x22,0x22,0x22,0x22,0x22,0x22,
		0x22,0x22,0x22,0x22,0x22,0x22,0x22,0x22,0x92,
		0x22,0x22,0x99,0x99,0x22,0x09,0x90,0x09,0x00,
		0x00,0x90,0x22,0x22,0x22,0x22,0x22,0x22,0x22,
		0x22,0x22,0x22,0x22,0x22,0x22,0x22,0x22,0x22,
		0x22,0x22,0x92,0x22,0x22,0x99,0x99,0x22,0x09,
		0x90,0x00,0x00,0x00,0x90,0x29,0x22,0x22,0x22,
		0x22,0x22,0x22,0x22,0x22,0x22,0x22,0x22,0x22,
		0x22,0x22,0x22,0x22,0x22,0x92,0x22,0x22,0x92,
		0x29,0x22,0x09,0x00,0x00,0x00,0x00,0x00,0x99,
		0x22,0x22,0x22,0x22,0x22,0x22,0x22,0x22,0x22,
		0x22,0x22,0x22,0x22,0x22,0x22,0x22,0x22,0x92,
		0x29,0x22,0x22,0x22,0x92,0x00,0x00,0x00,0x00,
		0x00,0x00,0x99,0x22,0x22,0x22,0x22,0x22,0x22,
		0x22,0x22,0x22,0x22,0x22,0x22,0x22,0x22,0x22,
		0x99,0x99,0x99,0x99,0x22,0x22,0x22,0x99,0x00,
		0x00,0x00,0x00,0x00,0x00,0x90,0x22,0x22,0x22,
		0x22,0x22,0x22,0x22,0x22,0x22,0x22,0x22,0x22,
		0x22,0x22,0x92,0x99,0x99,0x00,0x99,0x99,0x22,
		0x99,0x09,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
		0x29,0x22,0x22,0x22,0x22,0x22,0x22,0x22,0x22,
		0x22,0x22,0x22,0x22,0x22,0x92,0x00,0x00,0x00,
		0x00,0x99,0x99,0x09,0x00,0x00,0x00,0x00,0x00,
		0x00,0x00,0x00,0x90,0x22,0x22,0x22,0x22,0x22,
		0x22,0x22,0x22,0x22,0x22,0x22,0x22,0x22,0x99,
		0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
		0x00,0x00,0x00,0x00,0x00,0x00,0x90,0x29,0x22,
		0x22,0x22,0x22,0x22,0x22,0x22,0x22,0x22,0x22,
		0x22,0x92,0x09,0x00,0x00,0x00,0x00,0x00,0x00,
		0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
		0x00,0x99,0x29,0x22,0x22,0x22,0x22,0x22,0x22,
		0x22,0x22,0x22,0x22,0x99,0x00,0x00,0x00,0x00,
		0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
		0x00,0x00,0x00,0x00,0x00,0x99,0x29,0x22,0x22,
		0x22,0x22,0x22,0x22,0x22,0x92,0x99,0x09,0x00,
		0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
		0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
		0x99,0x99,0x22,0x22,0x22,0x22,0x22,0x92,0x99,
		0x09,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
		0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
		0x00,0x00,0x00,0x00,0x90,0x99,0x99,0x99,0x99,
		0x99,0x99,0x09,0x00,0x00,0x00,0x00,0x00,0x00,
		0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
		0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x90,0x93,
		0x99,0x99,0x99,0x93,0x09,0x00,0x00,0x00,0x00,
		0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
		0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
		0x00,0x90,0x39,0x33,0x33,0x33,0x99,0x00,0x00,
		0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
		0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
		0x00,0x00,0x00,0x00,0x00,0x90,0x99,0x99,0x99,
		0x09,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
		0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
		0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
		0x39,0x33,0x93,0x09,0x00,0x00,0x00,0x00,0x00,
		0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
		0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
		0x00,0x00,0x00,0x39,0x33,0x93,0x00,0x00,0x00,
		0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
		0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
		0x00,0x00,0x00,0x00,0x00,0x00,0x99,0x33,0x93,
		0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
		0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
		0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
		0x90,0x33,0x93,0x00,0x00,0x00,0x00,0x00,0x00,
		0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
		0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
		0x00,0x00,0x00,0x90,0x33,0x93,0x00,0x00,0x00,
		0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
		0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
		0x00,0x00,0x00,0x00,0x00,0x00,0x90,0x33,0x93,
		0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
		0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
		0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
		0x90,0x33,0x93,0x00,0x00,0x00,0x00,0x00,0x00,
		0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
		0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
		0x00,0x00,0x00,0x90,0x33,0x93,0x00,0x00,0x90,
		0x99,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
		0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
		0x00,0x00,0x90,0x99,0x99,0x99,0x90,0x33,0x93,
		0x00,0x90,0x99,0x99,0x99,0x99,0x99,0x09,0x00,
		0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
		0x00,0x00,0x00,0x00,0x00,0x99,0x33,0x33,0x93,
		0x99,0x39,0x93,0x00,0x99,0x39,0x33,0x99,0x99,
		0x99,0x99,0x99,0x00,0x00,0x00,0x00,0x00,0x00,
		0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x99,0x33,
		0x33,0x33,0x33,0x33,0x39,0x93,0x90,0x39,0x33,
		0x93,0x99,0x39,0x33,0x33,0x93,0x09,0x00,0x00,
		0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
		0x00,0x99,0x93,0x33,0x33,0x33,0x33,0x39,0x33,
		0x99,0x33,0x33,0x99,0x33,0x33,0x33,0x33,0x33,
		0x99,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
		0x00,0x00,0x00,0x00,0x99,0x99,0x33,0x33,0x33,
		0x33,0x99,0x33,0x99,0x33,0x93,0x39,0x33,0x33,
		0x33,0x33,0x33,0x93,0x09,0x00,0x00,0x00,0x00,
		0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x90,0x99,
		0x33,0x33,0x33,0x33,0x99,0x33,0x99,0x33,0x99,
		0x33,0x33,0x33,0x33,0x33,0x33,0x33,0x99,0x00,
		0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
		0x00,0x90,0x99,0x99,0x99,0x99,0x33,0x93,0x33,
		0x93,0x93,0x99,0x33,0x33,0x33,0x33,0x33,0x33,
		0x33,0x93,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
		0x00,0x00,0x00,0x99,0x99,0x39,0x33,0x33,0x99,
		0x99,0x99,0x39,0x93,0x99,0x39,0x33,0x33,0x33,
		0x33,0x33,0x33,0x33,0x93,0x09,0x00,0x00,0x00,
		0x00,0x00,0x00,0x00,0x00,0x90,0x99,0x99,0x33,
		0x33,0x33,0x33,0x33,0x93,0x99,0x33,0x99,0x33,
		0x33,0x33,0x33,0x33,0x33,0x33,0x33,0x93,0x09,
		0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x99,
		0x33,0x33,0x33,0x33,0x33,0x33,0x33,0x33,0x93,
		0x99,0x39,0x33,0x33,0x33,0x33,0x33,0x33,0x33,
		0x33,0x33,0x09,0x00,0x00,0x00,0x00,0x00,0x00,
		0x00,0x90,0x39,0x33,0x33,0x33,0x33,0x33,0x33,
		0x33,0x33,0x33,0x99,0x39,0x33,0x33,0x33,0x33,
		0x33,0x33,0x33,0x33,0x33,0x99,0x00,0x00,0x00,
		0x00,0x00,0x00,0x00,0x90,0x39,0x33,0x33,0x33,
		0x33,0x33,0x33,0x33,0x33,0x33,0x33,0x39,0x33,
		0x33,0x33,0x33,0x33,0x33,0x33,0x33,0x33,0x99,
		0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x90,0x33,
		0x33,0x33,0x33,0x33,0x33,0x33,0x33,0x33,0x33,
		0x33,0x99,0x33,0x33,0x33,0x33,0x33,0x99,0x99,
		0x99,0x33,0x99,0x00,0x00,0x00,0x00,0x00,0x00,
		0x00,0x99,0x33,0x33,0x33,0x33,0x33,0x33,0x33,
		0x33,0x33,0x33,0x33,0x99,0x33,0x33,0x33,0x33,
		0x93,0x09,0x00,0x90,0x33,0x99,0x00,0x00,0x00,
		0x00,0x00,0x00,0x00,0x39,0x33,0x33,0x33,0x33,
		0x33,0x33,0x33,0x33,0x33,0x33,0x33,0x99,0x33,
		0x33,0x33,0x33,0x99,0x00,0x00,0x90,0x39,0x09,
		0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x39,0x33,
		0x33,0x33,0x33,0x33,0x33,0x33,0x33,0x33,0x33,
		0x33,0x99,0x33,0x33,0x33,0x33,0x09,0x00,0x99,
		0x90,0x99,0x09,0x00,0x00,0x00,0x00,0x00,0x00,
		0x00,0x39,0x33,0x33,0x33,0x33,0x33,0x33,0x33,
		0x33,0x33,0x33,0x33,0x99,0x33,0x33,0x33,0x99,
		0x09,0x00,0x90,0x99,0x99,0x00,0x00,0x00,0x00,
		0x00,0x00,0x00,0x00,0x39,0x33,0x93,0x99,0x99,
		0x33,0x33,0x33,0x33,0x33,0x33,0x33,0x99,0x39,
		0x33,0x93,0x09,0x00,0x00,0x00,0x99,0x09,0x00,
		0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x99,0x33,
		0x09,0x00,0x90,0x99,0x33,0x33,0x33,0x33,0x93,
		0x93,0x09,0x99,0x93,0x99,0x00,0x00,0x00,0x00,
		0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
		0x00,0x99,0x93,0x09,0x00,0x00,0x90,0x99,0x33,
		0x33,0x33,0x93,0x99,0x00,0x90,0x99,0x99,0x00,
		0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
		0x00,0x00,0x00,0x00,0x90,0x99,0x99,0x00,0x00,
		0x00,0x90,0x99,0x99,0x99,0x99,0x09,0x00,0x00,
		0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
		0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x99,
		0x99,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
		0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
		0x00,0x00,0x00,0x00,0x00,0x00};

uint8_t pea_img[128] =
		{0x00,0x00,0x90,0x99,0x99,0x09,0x00,0x00,0x00,
		0x90,0x29,0x22,0x22,0x92,0x09,0x00,0x00,0x90,
		0x22,0x22,0x22,0x22,0x09,0x00,0x90,0x29,0x22,
		0x22,0x22,0x22,0x92,0x09,0x90,0x22,0x22,0x22,
		0x22,0x22,0x22,0x09,0x29,0x22,0x22,0x22,0x22,
		0x22,0x22,0x92,0x29,0x22,0x22,0x22,0x22,0x22,
		0x22,0x92,0x29,0x22,0x22,0x22,0x22,0x22,0x22,
		0x92,0x29,0x22,0x22,0x22,0x22,0x22,0x22,0x92,
		0x29,0x22,0x22,0x22,0x22,0x22,0x22,0x92,0x29,
		0x22,0x22,0x22,0x22,0x22,0x22,0x92,0x90,0x22,
		0x22,0x22,0x22,0x22,0x22,0x09,0x90,0x29,0x22,
		0x22,0x22,0x22,0x92,0x09,0x00,0x90,0x22,0x22,
		0x22,0x22,0x09,0x00,0x00,0x90,0x29,0x22,0x22,
		0x92,0x09,0x00,0x00,0x00,0x90,0x99,0x99,0x09,
		0x00,0x00};

pea_bullet_t pea_map[4][16];

void draw_plant(uint8_t plant_type, uint8_t row, uint8_t col,BRAM_t* hdmi_ctrl){
	if(plant_type != 0){
		for(int i = 0; i < PLANT_HEIGHT; i++){
			for(int j = 0; j < PLANT_WIDTH/2; j++){
				uint8_t pixel = plants_img[plant_type-1][i*PLANT_WIDTH/2+j];
				if(pixel != 0) hdmi_ctrl->VRAM[320*(i+row*90+PLANT_OFFSET_Y)+j+col*35+PLANT_OFFSET_X/2] = pixel;
			}
		}
	}
}

// TODO: this function not tested yet
void clear_plant(uint8_t plant_type, uint8_t row, uint8_t col,BRAM_t* hdmi_ctrl){
	if(plant_type != 0){
		for(int i = 0; i < PLANT_HEIGHT; i++){
			for(int j = 0; j < PLANT_WIDTH/2; j++){
				uint8_t pixel = plants_img[plant_type-1][i*PLANT_WIDTH/2+j];
				if(pixel != 0) hdmi_ctrl->VRAM[320*(i+row*90+PLANT_OFFSET_Y)+j+col*35+PLANT_OFFSET_X/2] = 0;
			}
		}
	}
}

void draw_pea(uint16_t x, uint16_t y, BRAM_t* hdmi_ctrl){
	for(int i = 0; i < PEA_HEIGHT; i++){
		for(int j = 0; j < PEA_WIDTH/2; j++){
			uint8_t pixel = pea_img[i*PEA_WIDTH/2+j];
			if(pixel != 0) hdmi_ctrl->VRAM[320*(i+y)+j+x/2] = pixel;
		}
	}
}

void clear_pea(uint16_t x, uint16_t y, BRAM_t* hdmi_ctrl){
	for(int i = 0; i < PEA_HEIGHT; i++){
		for(int j = 0; j < PEA_WIDTH/2; j++){
			uint8_t pixel = pea_img[i*PEA_WIDTH/2+j];
			if(pixel != 0) hdmi_ctrl->VRAM[320*(i+y)+j+x/2] = 0;
		}
	}

}

void pea_map_init(void){
	for(uint8_t i = 0; i < 4; i++){
		for(uint8_t j = 0; j < 8; j++){
			pea_map[i][j].is_present = 0;
		}
	}
}

void draw_pea_map(BRAM_t* hdmi_ctrl){
	for(uint8_t i = 0; i < 4; i++){
		for(uint8_t j = 0; j < 8; j++){
			if(pea_map[i][j].is_present){
				draw_pea(pea_map[i][j].pos_x,pea_map[i][j].pos_y, hdmi_ctrl);
			}
		}
	}
}

void add_pea(uint8_t grid_row, uint8_t grid_col){
	for(uint8_t i = 0; i< 8;i++){
		if(pea_map[grid_row][i].is_present==0){
			pea_map[grid_row][i].is_present = 1;
			pea_map[grid_row][i].pos_y = grid_row * 90 + 95; //TODO: to be modified
			pea_map[grid_row][i].pos_x = grid_col * 70 + 90;
		}
	}
}

void delete_pea(void);

